# === Provedor: aws | azure | gcp | local ===
STORAGE_PROVIDER=aws

# === Nome do bucket ou container ===
# IMPORTANTE: O STORAGE_BUCKET define ONDE os backups serao salvos:
#
# Para LOCAL: Caminho completo do diretorio (sera criado se nao existir)
#   Exemplo Linux: STORAGE_BUCKET=/home/usuario/meus-backups
#   Exemplo Windows: STORAGE_BUCKET=C:\Backups\SafeStic
#
# Para AWS: Nome do bucket S3 (deve existir previamente)
#   Exemplo: STORAGE_BUCKET=meu-bucket-backup-empresa
#   Gera automaticamente: s3:s3.amazonaws.com/meu-bucket-backup-empresa
#
# Para AZURE: Nome do container no Blob Storage (deve existir previamente)
#   Exemplo: STORAGE_BUCKET=backups-container
#   Gera automaticamente: azure:conta:backups-container:restic
#
# Para GCP: Nome do bucket no Cloud Storage (deve existir previamente)
#   Exemplo: STORAGE_BUCKET=meu-bucket-gcp-backups
#   Gera automaticamente: gs:meu-bucket-gcp-backups
#
# NOTA: Nao existe BACKUP_TARGET_DIR - o destino e sempre determinado por
# STORAGE_PROVIDER + STORAGE_BUCKET + logica interna do Restic
STORAGE_BUCKET=restic-backup-meuservidor

# === Fonte de credenciais: env | keyring | aws_secrets | azure_keyvault | gcp_secrets | sops ===
CREDENTIAL_SOURCE=env

# === Nome da aplicação para keyring (IMPORTANTE para múltiplos projetos) ===
# Define o identificador usado no keyring do sistema para armazenar credenciais
# PADRÃO: safestic
# 
# IMPORTANTE: Se você tem múltiplas instalações do Safestic (ex: diferentes projetos),
# use nomes únicos para evitar conflitos de credenciais:
# Exemplo: APP_NAME=safestic-projeto-aws
# Exemplo: APP_NAME=safestic-backup-pessoal
# 
# Isso garante que cada projeto tenha suas próprias credenciais no keyring
# APP_NAME=safestic

# === Senha do repositorio (OBRIGATÓRIA - guarde com segurança!) ===
# IMPORTANTE: Esta senha criptografa todos os seus backups!
# SEM ela, seus backups serão IRRECUPERÁVEIS!
# 
# Opções de configuração:
# 1. Descomente a linha abaixo se CREDENTIAL_SOURCE=env
# RESTIC_PASSWORD=MinhaSenh@Muito$egura123!
# 
# 2. Para outras fontes (keyring, aws_secrets, etc.), mantenha comentado
#    e configure a senha no gerenciador escolhido
# 
# Exemplo para keyring:
# python -c "import keyring; keyring.set_password('safestic', 'RESTIC_PASSWORD', 'MinhaSenh@Muito$egura123!')"
# 
# NUNCA use senhas fracas como: 123456, password, admin, etc.
# Use pelo menos 20 caracteres com letras, números e símbolos

# === Diretorios para backup (separados por virgula) ===
BACKUP_SOURCE_DIRS=/etc,/home/user

# === Arquivos a nao serem feito backup
RESTIC_EXCLUDES=*.log,*.tmp

# === Caminho absoluto ou relativo onde os arquivos restaurados serao salvos ===
RESTORE_TARGET_DIR=./meu_restore

# === Configuracoes de log ===
LOG_DIR=logs
LOG_LEVEL=INFO

# === Tags que serao aplicadas aos snapshots ===
# util para organizar e classificar os backups
RESTIC_TAGS=diario,servidorX,producao

# === Politica de retencao ===
# Ative ou desative a aplicacao de politica de retencao
RETENTION_ENABLED=true

# Quantos snapshots manter
KEEP_HOURLY=12
KEEP_DAILY=7
KEEP_WEEKLY=4
KEEP_MONTHLY=6

# === Autenticacao do provedor de nuvem ===
# IMPORTANTE: Descomente apenas se CREDENTIAL_SOURCE=env
# Para outras fontes (aws_secrets, azure_keyvault, gcp_secrets), 
# configure as credenciais no gerenciador respectivo

# === AWS S3 (descomente se CREDENTIAL_SOURCE=env) ===
# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=...
# AWS_DEFAULT_REGION=us-east-1

# === Azure Blob Storage (descomente se CREDENTIAL_SOURCE=env) ===
# AZURE_ACCOUNT_NAME=minhaconta
# AZURE_ACCOUNT_KEY=...

# === Google Cloud Storage (descomente se CREDENTIAL_SOURCE=env) ===
# GOOGLE_PROJECT_ID=meu-projeto-gcp
# GOOGLE_APPLICATION_CREDENTIALS=/caminho/para/credenciais.json

# === Configuracoes para gerenciadores de segredos em nuvem ===
# Descomente conforme o CREDENTIAL_SOURCE escolhido:

# Para CREDENTIAL_SOURCE=aws_secrets:
# AWS_REGION=us-east-1

# Para CREDENTIAL_SOURCE=azure_keyvault:
# AZURE_KEYVAULT_URL=https://meu-keyvault.vault.azure.net/

# Para CREDENTIAL_SOURCE=gcp_secrets:
# GCP_PROJECT_ID=meu-projeto-gcp

# Para CREDENTIAL_SOURCE=sops:
# SOPS_FILE=.env.enc

# === Exemplos de comandos para configurar segredos ===
# 
# AWS Secrets Manager:
# aws secretsmanager create-secret --name "safestic/RESTIC_PASSWORD" --secret-string "sua_senha"
# 
# Azure Key Vault:
# az keyvault secret set --vault-name "meu-keyvault" --name "RESTIC-PASSWORD" --value "sua_senha"
# 
# Google Cloud Secret Manager:
# echo -n "sua_senha" | gcloud secrets create RESTIC_PASSWORD --data-file=-
# 
# Keyring do Sistema:
# python -c "import keyring; keyring.set_password('safestic', 'RESTIC_PASSWORD', 'sua_senha')"
